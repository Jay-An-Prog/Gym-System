<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subscription</title>
    <link rel="icon" type="image/png" href="../../assets/images/favicon.png">
    <link rel="stylesheet" href="../../assets/css/member-dashboard/universal.css">
    <link rel="stylesheet" href="../../assets/css/member-dashboard/subscription.css">
</head>
<body>
    <!-- Burger button -->
    <div class="burger" id="burger" onclick="toggleSidebar()">â˜°</div>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sideBar">
        <div class="gym-logoname">
            <img src="../../assets/images/gym-logo.png" alt="Gym Logo">
          
            <h2>Sonic Gym</h2>
        </div>
        <ul>
            <li><a href="profile.html">  <img src="../../assets/images/profile.png" class="icon"> Profile </a></li>
            <li><a href="subscription.html">  <img src="../../assets/images/subscription.png" class="icon"> Subscription Status </a></li>
            <li><a href="qr.html">  <img src="../../assets/images/qr.png" class="icon"> QR Code </a></li>
            <li><a href="nutrition.html">  <img src="../../assets/images/nutrition.png" class="icon"> Nutrition Guide </a></li>
            <li><a href="progress.html">  <img src="../../assets/images/progress.png" class="icon"> Workout Progress </a></li>
            <li><a href="info.html">  <img src="../../assets/images/info.png" class="icon"> Personal Info </a></li>
            <li><a href="gym.html">  <img src="../../assets/images/gym.png" class="icon"> Gym Info </a></li>
            <li><a onclick="logout()">  <img src="../../assets/images/logout.png" class="icon"> Log out </a></li>
        </ul>
    </div>
        
    <!-- Main -->
    <div class="main">
        <div class="section">
            <div id="subscriptionContainer">
                <h3>Subscription Status</h3>
                <p class="status-box" id="statusBox">Status: <strong id="subscriptionStatus"></strong></p>
                <div class="date-box">
                    <p id="expirationDate"></p>
                    <p id="subscriptionDuration"></p>
                </div>

                <!-- GCash Payment Section -->
                <div class="gcash-box" id="gcashBox">
                    <h3>OR</h3>

                    <h3>Pay via GCash</h3>
                    <p class="gcash-note">
                        Please upload your <strong>GCash e-receipt</strong> as proof of payment.
                        Activation will be processed manually after verification.
                    </p>
                    
                    <!-- GCash QR (later loaded via Appwrite preview / sessionStorage) -->
                    <div class="gcash-qr-wrapper">
                        <img id="gcashQrImage" src="../../assets/images/gcash-qr.jpg">
                        <p class="qr-placeholder">
                            QR code will appear here
                        </p>
                    </div>
                    
                    <!-- Proof of Payment Upload -->
                    <div class="gcash-proof">
                        <label for="gcashProof">
                            Upload GCash Receipt (Screenshot)
                        </label>
                        <input type="file" id="gcashProof" accept="image/*">
                        
                        <button class="upload-button" id="uploadButton">Upload</button>
                        
                        <p class="proof-hint">
                            Accepted formats: JPG, PNG. One payment = one activation.
                        </p>
                    </div>
                </div>

                <!-- GCash Pending Verification Info -->
                <div class="gcash-pending-box" id="gcashPendingBox">
                    <h3>GCash Payment Submitted</h3>
                    
                    <p class="pending-note">
                        You selected <strong>GCash</strong> as your payment method.
                        Your proof of payment has been sent and is now under verification.
                    </p>
                    
                    <!-- Optional receipt preview -->
                    <div class="receipt-preview">
                        <p class="preview-label">Uploaded Receipt Preview</p>
                        <img id="gcashReceiptPreview" src="" alt="GCash Receipt Preview">
                    </div>
                    
                    <p class="verification-hint">
                        Activation is done manually by the admin.
                        You will be notified once your subscription is activated.
                    </p>
                </div> 

                <hr id="line">
                
                <!-- Become a Member Section -->
                <div class="subs-content">
                    <div class="plan-box" id="planBox">
                        <h3>Become a Member</h5>
                        <p>Select a plan and pay at the counter</p>
                        <p>or via GCash</p>
                    </div>
                    <div class="button-box">
                        <!-- Plan buttons -->
                        <button class="planBtn" id="monthlyBtn" onclick="requestPlan('Monthly')">Monthly Plan</button>
                        <button class="planBtn" id="yearlyBtn" onclick="requestPlan('Yearly')">Yearly Plan</button>
                        <!-- Cancel button (hidden by default) -->
                        <button id="cancelBtn" class="hidden">Cancel</button>      
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Necessary script -->
    <script src="../../assets/js/ui/member-dashboard/universal.js" defer></script>
    <script src="../../assets/js/ui/member-dashboard/subscription.js"></script>
    <!-- Backend script -->
    <script src="../../assets/js/fetch/member-dashboard/realtime.js" type="module"></script>
    <script src="../../assets/js/fetch/member-dashboard/universal.js" type="module"></script> 
    <script src="../../assets/js/fetch/member-dashboard/subscription.js" type="module"></script>
</body>
</html>

