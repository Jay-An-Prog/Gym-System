<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="icon" type="image/png" href="../../assets/images/favicon.png">
    <link rel="stylesheet" href="../../assets/css/member-dashboard/universal.css">
    <link rel="stylesheet" href="../../assets/css/member-dashboard/profile.css">
</head>
<body>
    <!-- Burger button -->
    <div class="burger" id="burger" onclick="toggleSidebar()">☰</div>

    <!-- Sidebar -->
    <div class="sidebar" id="sideBar">
        <div class="gym-logoname">
            <img src="../../assets/images/gym-logo.png" alt="Gym Logo">
            <h2>Sonic Gym</h2>
        </div>
        <ul>
            <li><a href="profile.html">  <img src="../../assets/images/profile.png" class="icon"> Profile </a></li>
            <li><a href="subscription.html">  <img src="../../assets/images/subscription.png" class="icon"> Subscription Status </a></li>
            <li><a href="qr.html">  <img src="../../assets/images/qr.png" class="icon"> QR Code </a></li>
            <li><a href="nutrition.html">  <img src="../../assets/images/nutrition.png" class="icon"> Nutrition Guide </a></li>
            <li><a href="progress.html">  <img src="../../assets/images/progress.png" class="icon"> Workout Progress </a></li>
            <li><a href="info.html">  <img src="../../assets/images/info.png" class="icon"> Personal Info </a></li>
            <li><a href="gym.html">  <img src="../../assets/images/gym.png" class="icon"> Gym Info </a></li>
            <li><a onclick="logout()">  <img src="../../assets/images/logout.png" class="icon"> Log out </a></li>
        </ul>
    </div>

    <!-- pattern="^([A-Z]([a-z]+)?(('|-)([a-z]{2,}|[A-Z][a-z]+?))?)(\s[A-Z][a-z]+)*$" -->

    <!-- Main -->
    <div class="main">
        <div class="section">
            <div class="profile-header">
                <img id="profileImage" src="../../assets/images/profile-icon.png" alt="Profile Icon">
                <div class="member-details">
                    <h2 id="welcome">Welcome, User!</h2>

                    <div id="statusWrapper">
                        <p id="statusNotice"></p>
                        <button class="edit-info" id="viewInfo" onclick="showForm()">view</button>
                        <button class="hide-info" id="hideInfo" onclick="hideForm()">X</button>
                    </div>
                </div>
                <form class="upload-form" id="uploadForm">
                    <h2 id="formTitle">Upload Your Details</h2>
                    <label>First Name:</label>
                    <input type="text" id="firstName" name="first_name" placeholder="Mark, María-José, José Luis" 
                           pattern="^[A-Za-zÁÉÍÓÚÜÑáéíóúüñ'\- ]{2,}$" required>
                    <div class="hint-msg">Use letters, hyphens, apostrophes, and spaces (e.g., María-José, Dela Cruz).</div>
                    
                    <label>Middle Initial:</label> 
                    <input type="text" id="middleName" name="middle_name" placeholder="P. M.J. (Optional)" 
                           pattern="^([A-Za-z](\.)?){1,2}$" maxlength="2">
                    <div class="hint-msg">Use letters only.</div>

                    <label>Last Name:</label>
                    <input type="text" id="lastName" name="last_name" placeholder="Reyes, Tan-Delos Santos, Dela Peña,"
                           pattern="^[A-Za-zÁÉÍÓÚÜÑáéíóúüñ'\- ]{2,}$" required>
                    <div class="hint-msg">Use letters, hyphens, apostrophes, and spaces (e.g., María-José, Dela Cruz).</div>

                    <label>Phone No.:</label>
                    <input type="tel" id="telPhone" name="phone_number" placeholder="09123456789" 
                           pattern="09[0-9]{9}" minlength="11" maxlength="11" required>
                    <div class="hint-msg">Enter a valid 11-digit Philippine mobile number starting with 09.</div>

                    <label>Address:</label>
                    <input type="text" id="homeAddress" name="user_address" placeholder="123 Street, Brgy. Manila" required>

                    <div id="verificationSection">
                        <!-- Face Upload -->
                        <div class="input-group">
                            <label>Face Image</label>
                            <button type="button" id="toggleCamera">Take Selfie</button>
                            <canvas id="faceCanvas" style="display:none;"></canvas>
                        </div>
                        <!-- ID Upload -->
                        <div class="input-group" data-group="1">
                            <label>ID Image</label>
                            <input type="file" id="id" name="id" accept="image/*" required>
                            <div class="preview" id="idPreview"></div>
                        </div>   
                        <div class="input-group">
                            <label>
                                <input type="checkbox" name="terms" required>
                                <a>I agree to the </a><a href="../member-dashboard/extension/terms.html" target="_blank">Terms and Conditions</a>
                            </label>
                        </div>
                        <button type="submit">Upload</button>
                        
                    </div>
                    
                    <button type="button" class="update-button" id="updateBtn">Update</button>

                    <!-- Camera Modal -->
                    <div id="cameraWrapper">
                        <div id="cameraModal">
                            <video id="video" autoplay></video>
                            <button id="captureBtn">Capture</button>
                        </div>
                    </div>
                </form>                  
            </div>
        </div>
    </div>    

    <!-- Necessary script -->
    <script src="../../assets/js/ui/member-dashboard/universal.js" defer></script>
    <script src="../../assets/js/ui/member-dashboard/profile.js"  defer></script>
    <!-- Backend script -->
    <script src="../../assets/js/fetch/member-dashboard/realtime.js" type="module"></script>
    <script src="../../assets/js/fetch/member-dashboard/universal.js" type="module"></script> 
    <script src="../../assets/js/fetch/member-dashboard/profile.js" type="module"></script>
</body>
</html>
