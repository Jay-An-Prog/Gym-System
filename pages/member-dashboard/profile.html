<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="icon" type="image/png" href="../../assets/images/favicon.png">
    <link rel="stylesheet" href="../../assets/css/member-dashboard/universal.css">
    <link rel="stylesheet" href="../../assets/css/member-dashboard/profile.css">
</head>
<body>
    <!-- Burger button -->
    <div class="burger" onclick="toggleSidebar()">☰</div>

    <!-- Sidebar -->
    <div class="sidebar" id="sideBar">
        <div class="gym-logoname">
            <img src="../../assets/images/gym-logo.png" alt="Gym Logo">
            <h2>Sonic Gym</h2>
        </div>
        <ul>
            <li><a href="profile.html">Profile</a></li>
            <li><a href="subscription.html">Subscription Status</a></li>
            <li><a href="qr.html">QR Code</a></li>
            <li><a href="info.html">Personal Info</a></li>
            <li><a href="gym.html">Gym Info</a></li>
            <li><a onclick="logout()">Log out</a></li>
        </ul>
    </div>

    <!-- pattern="^([A-Z]([a-z]+)?(('|-)([a-z]{2,}|[A-Z][a-z]+?))?)(\s[A-Z][a-z]+)*$" -->

    <!-- Main -->
    <div class="main">
        <div class="section">
            <div class="profile-header">
                <img id="profileImage" src="../../assets/images/profile-icon.png" alt="Profile Icon">
                <div class="member-details">
                    <h2 id="welcome">Welcome, User!</h1>

                    <div id="statusWrapper">
                        <p id="statusNotice"></p>
                        <button class="edit-info" id="editInfo" onclick="showForm()">Edit Info</button>
                        <button class="hide-info" id="hideInfo" onclick="hideForm()">X</button>
                    </div>
                </div>
                <form class="upload-form" id="uploadForm">
                    <h2>Upload Your Details</h2>
                    <label>First Name:</label>
                    <input type="text" id="firstName" name="first_name" placeholder="Mark, María-José, José Luis" 
                           pattern="^([A-ZÁÉÍÓÚÜÑ]([a-záéíóúüñ]+)?(('|-)([a-záéíóúüñ]{2,}|[A-ZÁÉÍÓÚÜÑ][a-záéíóúüñ]+?))?)(\s[A-ZÁÉÍÓÚÜÑ][a-záéíóúüñ]+)*$"
                           minlength="2" required>
                    <div class="hint-msg">Each word must start with a capital letter, may include hyphen or apostrophe, and only contain letters and spaces (e.g., Mark, Mark John, O'Neil, Anne-Marie, Jay-ar).</div>
                    
                    <label>Middle Initial:</label> 
                    <input type="text" id="middleName" name="middle_name" placeholder="P. M.J. (Optional)" 
                           pattern="^([A-Z]\.){1,2}$" maxlength="4">
                    <div class="hint-msg">Enter 1–2 initials with capital letters and dots (e.g., J. or J.D.).</div>

                    <label>Last Name:</label>
                    <input type="text" id="lastName" name="last_name" placeholder="Reyes, Tan-Delos Santos, Dela Peña,"
                           pattern="^([A-ZÁÉÍÓÚÜÑ]([a-záéíóúüñ]+)?(('|-)([a-záéíóúüñ]{2,}|[A-ZÁÉÍÓÚÜÑ][a-záéíóúüñ]+?))?)(\s[A-ZÁÉÍÓÚÜÑ][a-záéíóúüñ]+)*$"
                           minlength="2" required>
                    <div class="hint-msg">Each part of the surname must start with a capital letter, may include a hyphen or apostrophe, and only contain letters and spaces (e.g., Dela Cruz, De la Fuente, Tan-Delos Santos, O’Reilly, Dela Peña).</div>

                    <label>Phone No.:</label>
                    <input type="tel" id="telPhone" name="phone_number" placeholder="09123456789" 
                           pattern="09[0-9]{9}" minlength="11" maxlength="11" required>
                    <div class="hint-msg">Enter a valid 11-digit Philippine mobile number starting with 09.</div>

                    <label>Address:</label>
                    <input type="text" id="homeAddress" name="user_address" placeholder="123 Street, Brgy. Manila" required>

                    <!-- Face Upload -->
                    <div class="input-group">
                        <label>Face Image</label>
                        <button type="button" id="toggleCamera">Take Selfie</button>
                        <canvas id="faceCanvas" style="display:none;"></canvas>
                    </div>
                    <!-- ID Upload -->
                    <div class="input-group" data-group="1">
                        <label>ID Image</label>
                        <input type="file" id="id" name="id" accept="image/*" required>
                        <div class="preview" id="idPreview"></div>
                    </div>   
                    <div class="input-group">
                        <label>
                        <input type="checkbox" name="terms" required>
                        <a>I agree to the </a><a href="../member-dashboard/extension/terms.html" target="_blank">Terms and Conditions</a>
                        </label>
                    </div>
                    <button type="submit">Upload</button>

                    <!-- Camera Modal -->
                    <div id="cameraWrapper">
                      <div id="cameraModal">
                        <video id="video" autoplay></video>
                        <button id="captureBtn">Capture</button>
                      </div>
                    </div>
                </form>                  
            </div>
        </div>
    </div>    

    <!-- Necessary script -->
    <script src="../../assets/js/ui/member-dashboard/universal.js" defer></script>
    <script src="../../assets/js/ui/member-dashboard/profile.js"  defer></script>
    <!-- Backend script -->
    <script src="../../assets/js/fetch/member-dashboard/realtime.js" type="module"></script>
    <script src="../../assets/js/fetch/member-dashboard/universal.js" type="module"></script> 
    <script src="../../assets/js/fetch/member-dashboard/profile.js" type="module"></script>
</body>
</html>
